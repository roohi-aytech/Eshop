(function(b){var a=function(f,h){var v=b.extend({},b.fn.fusion.defaults,h);var p={width:0,aside:0,minHeight:0,current:0,current2:0,play:false,interval:"none",top:0};var k=b(f);if(v.effect=="vertical"){k.addClass("vertical")}else{if(v.effect=="horizontal"){k.addClass("horizontal")}else{k.addClass("mixed")}}if(v.bar=="aside"){k.addClass("aside")}p.width=k.find("div.content").outerWidth();var s=k.children("ul");var n=k.children("ul").find("li");var d=k.children("ul").find("a");d.first().addClass("selected");var l=k.find("section").first();var u=l.find("div.content");if(v.effect=="vertical"&&v.autoHeight==false){var q=0;for(var t=0;t<u.length;t++){var c=u.eq(t).outerHeight();if(c>q){q=c}}for(var t=0;t<u.length;t++){u.eq(t).css({height:q+"px"})}var g=s.outerHeight();if(v.bar=="aside"){g=0}k.css({height:q+g+"px"})}else{if(v.effect=="mixed"&&v.autoHeight==false){var q=0;for(var t=0;t<u.length;t++){var c=u.eq(t).outerHeight();if(c>q){q=c}}for(var t=0;t<u.length;t++){u.eq(t).css({height:q+"px"})}var g=s.outerHeight();if(v.bar=="aside"){g=0}k.css({height:q+g+"px"})}}k.css({opacity:"1"}).addClass("loaded");if(v.bar!="aside"){s.css({position:"absolute",width:"100%"})}if(v.showControls||v.showPlay){cleft="<a href=# class=left><</a>";cright="<a href=# class=right>></a>";playBtn="<a href=# class=play>&#9658;</a>";if(!v.showControls){cleft="";cright=""}if(!v.showPlay){playBtn=""}if(v.bar=="aside"){b("<div class=controls>"+cleft+playBtn+cright+"</div>").appendTo(s).css({top:"20px",right:-u.outerWidth()+15+"px"})}else{b("<div class=controls>"+cleft+playBtn+cright+"</div>").appendTo(s).css({top:s.outerHeight()+20,right:"15px"})}}if(v.bar=="aside"){k.css({width:"+="+s.outerWidth()+"px"});l.css("margin-left",s.outerWidth());p.aside=s.outerWidth();p.minHeight=n.length*n.outerHeight();for(var t=0;t<u.length;t++){var c=u.eq(t).outerHeight();if(c<p.minHeight){u.eq(t).css({height:p.minHeight+"px"})}}}else{l.css("margin-top",s.outerHeight());p.top=s.outerHeight()}if(v.autoHeight){var m=0;if(b.trim(u.eq(0).text())==""){m=6}var e=s.outerHeight();if(v.bar=="aside"){e=0}var o=(e+u.eq(0).outerHeight()-m);if(o<p.minHeight){o=p.minHeight}k.css({height:o+"px"})}d.on(v.eventTrigger,function(i){i.preventDefault();var w=d.index(this);if(p.play){r(d,k,l,u,v,p,"none")}j(d,k,l,u,v,p,w)});k.find(".right").on("click",function(i){i.preventDefault();var w=p.current+1;if(w>=u.length){w=0}if(p.play){r(d,k,l,u,v,p,"none")}j(d,k,l,u,v,p,w)});k.find(".left").on("click",function(i){i.preventDefault();var w=p.current-1;if(w<0){w=u.length-1}if(p.play){r(d,k,l,u,v,p,"none")}j(d,k,l,u,v,p,w)});k.find(".play").on("click",function(i){i.preventDefault();$this=b(this);if(!p.play){p.play=true;$this.html("| |").css({padding:"5px 7px 5px 7px"});p.interval=setInterval(function(){j(d,k,l,u,v,p,"none")},v.playInterval)}else{p.play=false;$this.html("&#9658;").css({padding:"5px 5px 5px 6px"});p.interval=window.clearInterval(p.interval)}});if(v.keyboardNav){b(window).keydown(function(w){if(w.keyCode=="37"){var i=p.current-1;if(i<0){i=u.length-1}if(p.play){r(d,k,l,u,v,p,"none")}j(d,k,l,u,v,p,i)}if(w.keyCode=="39"){var i=p.current+1;if(i>=u.length){i=0}if(p.play){r(d,k,l,u,v,p,"none")}j(d,k,l,u,v,p,i)}})}if(v.autoPlay){if(!p.play){p.play=true;k.find(".controls").find(".play").html("| |").css({padding:"5px 7px 5px 7px"});p.interval=setInterval(function(){j(d,k,l,u,v,p,"none")},v.playInterval)}}var r=function(x,i,A,y,w,z){z.interval=window.clearInterval(z.interval);z.interval=setInterval(function(){j(x,i,A,y,w,z,"none")},w.playInterval)};var j=function(F,C,G,y,z,E,D){if(D!="none"){E.current2=E.current;E.current=D}else{E.current2=E.current;var w=E.current+1;if(w>=y.length){w=0}E.current=w}F.eq(E.current).addClass("selected").parent("li").siblings("li").find("a").removeClass("selected");if(z.autoHeight){var x=0;if(b.trim(y.eq(E.current).text())==""){x=6}var B=s.outerHeight();if(z.bar=="aside"){B=0}var H=B+y.eq(E.current).outerHeight()-x;if(H<E.minHeight){H=E.minHeight}C.stop();C.animate({height:H+"px"},z.animSpeed)}G.stop();if(z.effect=="vertical"){var I=0;for(var A=0;A<E.current;A++){I+=y.eq(A).outerHeight()}G.animate({"margin-top":-I+E.top},z.animSpeed)}else{if(z.effect=="horizontal"){G.animate({"margin-left":-E.current*E.width+E.aside},z.animSpeed)}else{if(z.effect=="mixed"){y.css({"z-index":"-1"});y.eq(E.current2).css({"z-index":"99"});objShow=y.eq(E.current);if(objShow.data("effect")=="fade"){objShow.css({"z-index":"100"}).hide().fadeIn(z.animSpeed)}else{if(objShow.data("effect")=="slide"){objShow.css({"z-index":"100"}).hide().slideDown(z.animSpeed)}else{if(objShow.data("effect")=="show"){objShow.css({"z-index":"100"}).hide().show(z.animSpeed)}else{if(objShow.data("effect")=="fromTop"){objShow.css({"z-index":"100",top:-objShow.outerHeight()}).animate({top:"0px"},z.animSpeed)}else{if(objShow.data("effect")=="fromBottom"){objShow.css({"z-index":"100",top:G.outerHeight()}).animate({top:"0px"},z.animSpeed)}else{if(objShow.data("effect")=="fromRight"){objShow.css({"z-index":"100",left:objShow.outerWidth()}).animate({left:"0px"},z.animSpeed)}else{if(objShow.data("effect")=="fromLeft"){objShow.css({"z-index":"100",left:-objShow.outerWidth()}).animate({left:"0px"},z.animSpeed)}else{if(objShow.data("effect")=="fromTopRight"){objShow.css({"z-index":"100",top:-objShow.outerHeight(),left:objShow.outerWidth()}).animate({top:"0px",left:"0px"},z.animSpeed)}else{if(objShow.data("effect")=="fromBottomRight"){objShow.css({"z-index":"100",top:G.outerHeight(),left:objShow.outerWidth()}).animate({top:"0px",left:"0px"},z.animSpeed)}else{if(objShow.data("effect")=="fromTopLeft"){objShow.css({"z-index":"100",top:-objShow.outerHeight(),left:-objShow.outerWidth()}).animate({top:"0px",left:"0px"},z.animSpeed)}else{if(objShow.data("effect")=="fromBottomLeft"){objShow.css({"z-index":"100",top:G.outerHeight(),left:-objShow.outerWidth()}).animate({top:"0px",left:"0px"},z.animSpeed)}else{if(objShow.data("effect")=="rotateRight"){objShow.css({"z-index":"100"}).rotate("-180deg").animate({rotate:"0deg"},z.animSpeed)}else{if(objShow.data("effect")=="rotateLeft"){objShow.css({"z-index":"100"}).rotate("180deg").animate({rotate:"0deg"},z.animSpeed)}else{if(objShow.data("effect")=="zoomIn"){objShow.css({"z-index":"100"}).scale("2").animate({scale:"1"},z.animSpeed)}else{if(objShow.data("effect")=="zoomOut"){objShow.css({"z-index":"100"}).scale(".3").animate({scale:"1"},z.animSpeed)}else{objShow.css({"z-index":"100"}).hide().fadeIn(z.animSpeed)}}}}}}}}}}}}}}}}}}};return this};b.fn.fusion=function(c){return this.each(function(f,g){var e=b(this);if(e.data("fusion")){return e.data("fusion")}var d=new a(this,c);e.data("fusion",d)})};b.fn.fusion.defaults={effect:"horizontal",animSpeed:700,eventTrigger:"click",autoHeight:true,bar:"top",showControls:true,showPlay:true,playInterval:2000,autoPlay:true,keyboardNav:true};b.fn._reverse=[].reverse})(jQuery);