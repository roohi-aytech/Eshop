(function(e){e.fn.priceFormat=function(t){var n={prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:false,centsLimit:2,clearPrefix:false,clearSufix:false,allowNegative:false,insertPlusSign:false};var t=e.extend(n,t);return this.each(function(){function d(e){var t="";for(var n=0;n<e.length;n++){char_=e.charAt(n);if(t.length==0&&char_==0)char_=false;if(char_&&char_.match(r)){if(a){if(t.length<a)t=t+char_}else{t=t+char_}}}return t}function v(e){while(e.length<f+1)e="0"+e;return e}function m(t){var n=v(d(t));var r="";var a=0;if(f==0){o="";l=""}var l=n.substr(n.length-f,f);var c=n.substr(0,n.length-f);n=f==0?c:c+o+l;if(u||e.trim(u)!=""){for(var m=c.length;m>0;m--){char_=c.substr(m-1,1);a++;if(a%3==0)char_=u+char_;r=char_+r}if(r.substr(0,1)==u)r=r.substring(1,r.length);n=f==0?r:r+o+l}if(h&&t.indexOf("-")!=-1&&(c!=0||l!=0))n="-"+n;else if(p&&(c!=0||l!=0))n="+"+n;if(i)n=i+n;if(s)n=n+s;return n}function g(e){var t=e.keyCode?e.keyCode:e.which;var r=String.fromCharCode(t);var i=false;var s=n.val();var o=m(s+r);if(t>=48&&t<=57||t>=96&&t<=105)i=true;if(t==8)i=true;if(t==9)i=true;if(t==13)i=true;if(t==46)i=true;if(t==37)i=true;if(t==39)i=true;if(h&&(t==189||t==109))i=true;if(p&&(t==187||t==107))i=true;if(!i){e.preventDefault();e.stopPropagation();if(s!=o)n.val(o)}}function y(){var e=n.val();var t=m(e);if(e!=t)n.val(t)}function b(){var e=n.val();n.val(i+e)}function w(){var e=n.val();n.val(e+s)}function E(){if(e.trim(i)!=""&&l){var t=n.val().split(i);n.val(t[1])}}function S(){if(e.trim(s)!=""&&c){var t=n.val().split(s);n.val(t[0])}}var n=e(this);var r=/[0-9]/;var i=t.prefix;var s=t.suffix;var o=t.centsSeparator;var u=t.thousandsSeparator;var a=t.limit;var f=t.centsLimit;var l=t.clearPrefix;var c=t.clearSuffix;var h=t.allowNegative;var p=t.insertPlusSign;if(p)h=true;e(this).bind("keydown.price_format",g);e(this).bind("keyup.price_format",y);e(this).bind("focusout.price_format",y);if(l){e(this).bind("focusout.price_format",function(){E()});e(this).bind("focusin.price_format",function(){b()})}if(c){e(this).bind("focusout.price_format",function(){S()});e(this).bind("focusin.price_format",function(){w()})}if(e(this).val().length>0){y();E();S()}})};e.fn.unpriceFormat=function(){return e(this).unbind(".price_format")};e.fn.unmask=function(){var t=e(this).val();var n="";for(var r in t){if(!isNaN(t[r])||t[r]=="-")n+=t[r]}return n}})(jQuery)