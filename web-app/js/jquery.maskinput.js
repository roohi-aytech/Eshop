/*
  Mask Input plugin for jQuery
  Licensed under the MIT license (https://github.com/shaungrady/jquery-mask-input/blob/master/LICENSE)
  Version: 1.4
*/
(function(e,t,n,r){function s(e){if(e.selectionStart!==r)return e.selectionStart;else if(n.selection){e.focus();var t=n.selection.createRange();t.moveStart("character",-e.value.length);return t.text.length}}function o(e,t){if(e.setSelectionRange){e.focus();e.setSelectionRange(t,t)}else if(e.createTextRange){var n=e.createTextRange();n.collapse(true);n.moveEnd("character",t);n.moveStart("character",t);n.select()}}function u(e){if(e.selectionStart!==r)return e.selectionEnd-e.selectionStart;if(n.selection)return n.selection.createRange().text.length}var i={9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/};e.fn.extend({maskInput:function(t,n){if(!this.length)return this;n=n||e.noop;return this.filter("input").each(function(a,f){function m(t){return e.inArray(t,h)>-1}function g(t){var n="",r=p.slice();e.each(t.split(""),function(e,t){if(r.length&&r[0].test(t)){n+=t;r.shift()}});return n}function y(t){var n="",r=h.slice();e.each(d.split(""),function(e,i){if(t.length&&e===r[0]){n+=t.charAt(0)||"_";t=t.substr(1);r.shift()}else n+=i});return n}function b(t){var n=e(this);if(!n.data("isUnmaskedValueValid")){n.val("");n.attr("value-unmasked","")}n.data("caretPositionPreinput",0);n.data("selectionLengthPreinput",0)}function w(t){var r=t.which,i=t.type;if(r==16||r==91)return true;var a=e(this),f=a.val(),l=a.data("valuePreinput")||"",c,p=g(f),v=a.attr("value-unmasked")||"",b=false,E=s(this)||0,S=a.data("caretPositionPreinput")||0,x=E-S,T=h[0],N=h[p.length]||h.slice().pop()+1,C=u(this),k=a.data("selectionLengthPreinput")||0,L=C>0,A=k>0,O=f.length>l.length||k&&f.length>l.length-k,M=f.length<l.length||k&&f.length==l.length-k,_=r>=37&&r<=40&&t.shiftKey,D=r==37,P=r==8||i!="keyup"&&M&&x===-1,H=r==46||i!="keyup"&&M&&x===0&&!A,B=(D||P||i=="click")&&E>T;a.data("selectionLengthPreinput",C);a.unbind("mouseout.mask").one("mouseout.mask",w);if(i=="mouseout"||_||L&&(i=="click"||i=="keyup"))return true;if((i=="input"||i=="propertychange")&&M&&!A&&p===v){while(P&&E>0&&!m(E))E--;while(H&&E<d.length&&e.inArray(E,h)==-1)E++;var j=e.inArray(E,h);p=p.substring(0,j)+p.substring(j+1)}b=p.length===h.length-1;a.attr("value-unmasked",p);a.data("isUnmaskedValueValid",b);c=y(p);a.data("valuePreinput",c);a.val(c);if(O&&E<=T)E=T+1;if(B)E--;E=E>N?N:E<T?T:E;while(!m(E)&&E>T&&E<N)E+=B?-1:1;if(B&&E<N||O&&!m(S))E++;a.data("caretPositionPreinput",E);o(this,E);n({isValid:b,value:p,maskedValue:c})}var l=e(f),c=l.attr("mask")||t,h=[],p=[],d="",v=0;if(c===r)return true;if(c instanceof Array){e.each(c,function(t,n){if(n instanceof RegExp){h.push(v++);d+="_";p.push(n)}else if(typeof n=="string"){e.each(n.split(""),function(e,t){d+=t;v++})}})}else{e.each(c.split(""),function(e,t){if(i[t]){h.push(v);d+="_";p.push(i[t])}else d+=t;v++})}if(!h.length)return this;h.push(v);(function(e){var t=g(e.val()),n=y(t),r=t.length===h.length-1,i=e.attr("maxlength");e.val(n);e.attr("value-unmasked",t);e.data("isUnmaskedValueValid",r);if(i)e.attr("maxlength",parseInt(i,10)+1)})(l);l.attr("placeholder",d);l.unbind(".mask");l.bind("blur.mask",b).triggerHandler("blur");l.bind("input.mask propertychange.mask keyup.mask click.mask",w)})}})})(jQuery,window,document);